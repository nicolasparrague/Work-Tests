<template>
    <!-- Cancel Auto Pay Button -->
    <div class="nds-size_12-of-12">
        <button class="nds-button nds-button_brand nds-button_stretch" onclick={launchModal} title="Cancel Pending Payment" >Cancel Pending Payment</button>
    </div>
    <!-- CVV Modal -->
    <template if:true={openModal}>
        <template if:true={loading}>
            <lightning-spinner alternative-text="Loading" size="small"> </lightning-spinner>
        </template>
        <!-- Modal/Popup Box LWC starts here -->
        <section role="dialog" tabindex="0" aria-labelledby="modal-heading-01" aria-modal="true" aria-describedby="modal-content-id-1" class="nds-modal nds-fade-in-open">
            <div class="nds-modal__container">
                <!-- Modal/Popup Box LWC header here -->
                <header class="nds-modal__header modal-header-confirmation">
                    <h2 id="modal-heading-02" class="nds-hyphenate modal-title">Confirmation Message</h2>
                </header>
                <!-- Modal/Popup Box LWC body starts here -->
                <div class="nds-modal__content nds-p-around_medium" id="modal-content-id-2">
                <div class="nds-grid nds-p-around_medium nds-align_absolute-center"> 
                    
                        <template if:false={successMessage}>
                            <lightning-icon icon-name="utility:info_alt" alternative-text="Info" size="large" title="Info" class="nds-m-right_small nds-brand"></lightning-icon>
                            <template if:false={errorMessage}>
                            <p class="nds-text-body_regular">Are you sure you want to cancel your pending payment?</p>
                            </template>
                            <template if:true={errorMessage}>
                                <p class="nds-text-body_regular">
                                    Your pending payment could not be cancelled at this time. Please try again, or contact us through the Message Center
                                </p>
                            </template>
                        </template>
                        <template if:true={successMessage}>
                            <!-- <lightning-icon icon-name="utility:success" alternative-text="Success" size="large" title="Info" class="nds-m-right_x-small nds-brand"></lightning-icon> -->
                            <p class="nds-text-body_regular">Your pending payment is cancelled successfully!</p>
                        </template>
                    
                </div>
                <div class="nds-grid nds-wrap">
                <template if:false={successMessage}>
                    <template if:false={errorMessage}>
                    <div class="nds-size_1-of-1 nds-col nds-small-size_6 nds-medium-size_4-of-12 nds-large-size_5-of-12 nds-align_absolute-center nds-m-bottom_medium">
                        <button class="nds-button nds-button_neutral nds-button_stretch" onclick={closeModal} title="Close">No, don't cancel</button>
                    </div>
                    <div class="nds-size_1-of-1 nds-col nds-small-size_6 nds-medium-size_5-of-12 nds-large-size_5-of-12 nds-align_absolute-center nds-m-bottom_medium">
                        <button class="nds-button nds-button_brand nds-button_brand nds-button_stretch" onclick={cancelPendingPayment} title="Cancel">Yes, cancel</button>
                    </div>
                    </template>
                    <template if:true={errorMessage}>
                    <div class="nds-size_1-of-1 nds-col nds-small-size_6 nds-medium-size_6-of-12 nds-large-size_5-of-12 nds-align_absolute-center nds-m-bottom_medium">
                        <button class="nds-button nds-button_brand nds-button_stretch" onclick={tryAgain} title="Close">Try again</button>
                    </div>
                    </template>
                </template>
                <template if:true={successMessage}>
                    <div class="nds-size_1-of-1 nds-col nds-small-size_6 nds-medium-size_6-of-12 nds-large-size_6-of-12 nds-align_absolute-center nds-m-bottom_medium">
                        <button class="nds-button nds-button_brand nds-button_stretch" onclick={closeReload} title="Cancel">Ok</button>
                    </div>
                </template>
                </div>
                </div>
            </div>
        </section>
        <div class="nds-backdrop nds-backdrop_open"></div>
    </template>
</template>