<template>
    <template if:true={showAccordion}>
        <div class="nds-grid nds-m-bottom_small">
            <lightning-accordion class="nds-size_12-of-12" active-section-name={activeAccordionSection} allow-multiple-sections-open="true">
                <lightning-accordion-section name={planData.accordionName} label={planData.accordionLabel} onclick={handleSectionToggle}>
                    <div class="via-nds nds-grid nds-size_12-of-12">
                        <template if:true={loading}>
                            <lightning-spinner alternative-text="Loading" size="medium"> </lightning-spinner>
                        </template>
                        <div class="nds-grid nds-wrap">
                            <template if:true={showRequestMsg}>
                                <div class="nds-grid nds-gutters nds-grid_align-center nds-m-bottom_x-large nds-size_1-of-1">
                                    <div>
                                        <div class="nds-notify nds-notify_alert" role="alert">
                                            <c-custom-icon class="nds-m-right_small" icon-name="Information_Tool_Tip" size="medium" variant="information" alternative-text="Information Tool Tip"></c-custom-icon>
                                            <span class="nds-assistive-text">info</span>
                                            <p>{requestIdCardMsg}</p>
                                        </div>
                                    </div>
                                </div>
                            </template>
                            <template if:true={showErrorMsg}>
                                <div class="nds-notify nds-notify_alert" role="alert">
                                    <c-custom-icon class="nds-m-right_small" icon-name="Error" size="medium" variant="error" alternative-text="Error"></c-custom-icon>
                                    <div>{errorMsg}<br />{errorDetails}</div>
                                </div>
                            </template>
                            <div class="nds-size_1-of-1">
                                <template if:true={showTempId}>
                                    <c-temp-id-card
                                        card-data={cardData}
                                        type={cardType}
                                        ongeneratepdf={handleGeneratePDFEvent}
                                        onrequestid={handleRequestIdEvent}>
                                    </c-temp-id-card>
                                </template>
                                <template if:true={showEmpireTempId}>
                                    <c-temp-empire-id-card
                                        card-data={cardData}
                                        type={cardType}
                                        ongeneratepdf={handleGenerateEmpirePDFEvent}
                                        onrequestid={handleRequestIdEvent}>
                                    </c-temp-empire-id-card>
                                </template>
                                <template if:true={showPermId}>
                                    <c-permanent-id-card
                                        card-data={cardData}
                                        perm-data={permCardData}
                                        type={cardType}
                                        ongeneratepdfdesktop={handleGeneratePermPDFDesktopEvent}
                                        ongeneratepdfmobile={handleGeneratePermPDFMobileEvent}
                                        onrequestid={handleRequestIdEvent}>
                                    </c-permanent-id-card>
                                </template>
                                <template if:true={showEmpirePermId}>
                                    <c-permanent-id-card
                                        card-data={cardData}
                                        perm-data={empirePermCardData}
                                        type={cardType}
                                        ongeneratepdfdesktop={handleGeneratePermPDFDesktopEvent}
                                        ongeneratepdfmobile={handleGeneratePermPDFMobileEvent}
                                        onrequestid={handleRequestIdEvent}>
                                    </c-permanent-id-card>
                                </template>
                            </div>
                        </div>
                    </div>
                </lightning-accordion-section>
            </lightning-accordion>
        </div>
    </template>
</template>